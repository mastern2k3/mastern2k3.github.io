<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Buffs, buffs everywhere | Gato Malo</title>
    <meta name="description" content="An indie game developer with an insane cat">
    <link rel="icon" href="/favicon.png">
  <link rel="stylesheet" href="/buefy.css">
  <link rel="stylesheet" href="https://cdn.materialdesignicons.com/2.5.94/css/materialdesignicons.min.css">
    <meta property="article:published_time" content="2019-06-28T11:10:00.000Z"><meta property="article:modified_time" content="2019-07-21T16:11:07.000Z"><meta property="og:site_name" content="Gato Malo"><meta property="og:title" content="Buffs, buffs everywhere | Gato Malo"><meta property="og:type" content="article"><meta property="og:url" content="https://gatomalo.dev/blog/2019/06/28/buffs-everywhere/"><meta property="og:image" content="https://gatomalo.dev/assets/img/logo.png"><meta name="twitter:title" content="Buffs, buffs everywhere | Gato Malo"><meta name="twitter:url" content="https://gatomalo.dev/blog/2019/06/28/buffs-everywhere/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://gatomalo.dev/assets/img/logo.png"><meta name="twitter:label1" content="Written by"><meta name="twitter:data2" content="Nitzan Zada"><meta name="twitter:creator" content="@nitzanzada"><meta name="keywords" content="game,games,game dev,throne of mithril,game blog,throne,mithril">
    <link rel="preload" href="/assets/css/0.styles.7956da7d.css" as="style"><link rel="preload" href="/assets/js/app.aab274b9.js" as="script"><link rel="preload" href="/assets/js/15.ef070075.js" as="script"><link rel="preload" href="/assets/js/1.702fd0e7.js" as="script"><link rel="preload" href="/assets/js/8.71366cfb.js" as="script"><link rel="prefetch" href="/assets/js/10.0f0197a7.js"><link rel="prefetch" href="/assets/js/11.cf86e08e.js"><link rel="prefetch" href="/assets/js/12.febf18f7.js"><link rel="prefetch" href="/assets/js/13.a5b9ee42.js"><link rel="prefetch" href="/assets/js/14.c19256be.js"><link rel="prefetch" href="/assets/js/16.f9def6b3.js"><link rel="prefetch" href="/assets/js/17.b44762e7.js"><link rel="prefetch" href="/assets/js/18.60ea9fa3.js"><link rel="prefetch" href="/assets/js/19.779cd5f7.js"><link rel="prefetch" href="/assets/js/20.3e3034f3.js"><link rel="prefetch" href="/assets/js/21.5add7839.js"><link rel="prefetch" href="/assets/js/22.f6f0ae98.js"><link rel="prefetch" href="/assets/js/23.5a7c98b2.js"><link rel="prefetch" href="/assets/js/24.6ea62db6.js"><link rel="prefetch" href="/assets/js/25.74c40a8e.js"><link rel="prefetch" href="/assets/js/26.54d47595.js"><link rel="prefetch" href="/assets/js/27.592d4e15.js"><link rel="prefetch" href="/assets/js/3.a0f355d7.js"><link rel="prefetch" href="/assets/js/4.4caef087.js"><link rel="prefetch" href="/assets/js/5.e930134d.js"><link rel="prefetch" href="/assets/js/6.f43135aa.js"><link rel="prefetch" href="/assets/js/7.7ee55ec0.js"><link rel="prefetch" href="/assets/js/9.2d6ba09b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7956da7d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="Gato Malo" class="logo"> <span class="site-name can-hide">Gato Malo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/tag/throne/" class="nav-link">Throne of Mithril</a></div><div class="nav-item"><a href="/about/me.html" class="nav-link">About</a></div><div class="nav-item"><a href="/about/me.html#subscribe-and-stay-posted" class="nav-link">Subscribe</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/tag/throne/" class="nav-link">Throne of Mithril</a></div><div class="nav-item"><a href="/about/me.html" class="nav-link">About</a></div><div class="nav-item"><a href="/about/me.html#subscribe-and-stay-posted" class="nav-link">Subscribe</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="page-title"><a href="#page-title" aria-hidden="true" class="header-anchor">#</a> Buffs, buffs everywhere</h1> <p>The task of adding character buffs to the game required adding some cool
complexities to the state engine, including stat effects, allowing transient
alterations to the character's stats, and state slots enabling characters to
act-out multiple effects at a time.</p> <h3 id="buff-system-and-triggers"><a href="#buff-system-and-triggers" aria-hidden="true" class="header-anchor">#</a> Buff system and triggers</h3> <p><img src="/assets/img/enrage_triggered.66e3c4c1.gif" alt="Enrage triggered"></p> <p>The buff system took much thinking but little actual code, I ended up designing
it as part of the already existing character state machine module.</p> <p>The task leading to adding the buff system was implementing an &quot;enrage&quot; mechanic,
causing an enemy to apply a buff to himself when it's hp falls under a certain
amount, for that, I added trigger semantics allowing me to implement various
types of triggers.</p> <p><img src="/assets/img/dot.4d840b45.gif" alt="Damage over time on 'smash'"></p> <p>Trigger semantics were designed with boss encounters in mind so that bosses
could play out different phases of an encounter based on different triggers.</p> <h3 id="stat-effects"><a href="#stat-effects" aria-hidden="true" class="header-anchor">#</a> Stat effects</h3> <p>Although currently the damage inflicted by melee attacks is a simple flat value
associated with the character, I wanted to add a semantic allowing me to apply a
transient change to it.</p> <p>Stat effects simply allow for the adding / removing of stat altering components
that trigger a recalculation of the character's effective stats when applied.</p> <p>The &quot;enrage&quot; buff described above uses a stat effect, adding 15 melee damage to
the effected character.</p> <h3 id="on-the-fly-character-creation"><a href="#on-the-fly-character-creation" aria-hidden="true" class="header-anchor">#</a> On-the-fly character creation</h3> <p><img src="/assets/img/instance_char.72f25aff.gif" alt="Ability creating character"></p> <p>This might not look too glamorous but it is an important milestone for cooler
features I want to have, like:</p> <ul><li>Bosses summoning adds</li> <li>Enemy &quot;Nests&quot; that keep spawning enemies unless destroyed</li> <li>Character abilities that spawn allies</li></ul> <h2 id="small-changes"><a href="#small-changes" aria-hidden="true" class="header-anchor">#</a> Small Changes</h2> <ul><li><p><strong>Version imprint</strong> - Build process now &quot;watermarks&quot; a version string based on
version control tags and hashes, visible also on the client display.</p></li> <li><p><strong>Heals cause aggro</strong> - Friendly heals cause aggro to nearby enemies and may
redirect attention to the healer.</p></li> <li><p><strong>Cast breaking</strong> - Cast-breaking semantics now enable abilities and buffs to
break spell-casting.</p></li></ul> <p><img src="/assets/img/break_spell.21f01d67.gif" alt="Cast breaking"></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Updated: </span> <span class="time">7/21/2019, 7:11:07 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/2019/06/08/moving-around/" class="prev">
          Moving Around
        </a></span> <span class="next"><a href="/blog/2019/07/21/time-to-play/">
          Time to Play
        </a>
        →
      </span></p></div> <div class="theme-default-content"><div id="remark42"></div></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.aab274b9.js" defer></script><script src="/assets/js/15.ef070075.js" defer></script><script src="/assets/js/1.702fd0e7.js" defer></script><script src="/assets/js/8.71366cfb.js" defer></script>
  </body>
</html>
