<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Error Monitoring in Godot using Sentry | Gato Malo</title>
    <meta name="description" content="An indie game developer with an insane cat">
    <link rel="icon" href="/favicon.png">
  <link rel="stylesheet" href="/buefy.css">
  <link rel="stylesheet" href="https://cdn.materialdesignicons.com/2.5.94/css/materialdesignicons.min.css">
    <meta property="article:published_time" content="2020-03-21T17:53:04.000Z"><meta property="article:modified_time" content="2020-03-22T22:54:05.000Z"><meta property="og:site_name" content="Gato Malo"><meta property="og:title" content="Error Monitoring in Godot using Sentry | Gato Malo"><meta property="og:type" content="article"><meta property="og:url" content="https://gatomalo.dev/blog/2020/03/21/error-monitoring-godot-sentry/"><meta property="og:image" content="https://gatomalo.dev/assets/img/logo.png"><meta name="twitter:title" content="Error Monitoring in Godot using Sentry | Gato Malo"><meta name="twitter:url" content="https://gatomalo.dev/blog/2020/03/21/error-monitoring-godot-sentry/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://gatomalo.dev/assets/img/logo.png"><meta name="twitter:label1" content="Written by"><meta name="twitter:data2" content="Nitzan Zada"><meta name="twitter:creator" content="@nitzanzada"><meta name="keywords" content="game,games,game dev,throne of mithril,game blog,throne,mithril,godot,sentry,monitoring,error monitoring">
    <link rel="preload" href="/assets/css/0.styles.7956da7d.css" as="style"><link rel="preload" href="/assets/js/app.74d693c4.js" as="script"><link rel="preload" href="/assets/js/16.39754019.js" as="script"><link rel="preload" href="/assets/js/1.b234d2c9.js" as="script"><link rel="preload" href="/assets/js/2.3538cb34.js" as="script"><link rel="preload" href="/assets/js/7.ed106160.js" as="script"><link rel="prefetch" href="/assets/js/10.ef634fd4.js"><link rel="prefetch" href="/assets/js/11.83399306.js"><link rel="prefetch" href="/assets/js/12.0ca283a1.js"><link rel="prefetch" href="/assets/js/13.453ec6af.js"><link rel="prefetch" href="/assets/js/14.8863376c.js"><link rel="prefetch" href="/assets/js/15.f9c030ce.js"><link rel="prefetch" href="/assets/js/17.68194335.js"><link rel="prefetch" href="/assets/js/18.5e4f1537.js"><link rel="prefetch" href="/assets/js/19.f3823890.js"><link rel="prefetch" href="/assets/js/20.29318f7a.js"><link rel="prefetch" href="/assets/js/21.de5c4a05.js"><link rel="prefetch" href="/assets/js/22.21c11827.js"><link rel="prefetch" href="/assets/js/23.5150e77c.js"><link rel="prefetch" href="/assets/js/24.8c3a7563.js"><link rel="prefetch" href="/assets/js/25.c0eeb280.js"><link rel="prefetch" href="/assets/js/26.22c75e86.js"><link rel="prefetch" href="/assets/js/27.fd53cc11.js"><link rel="prefetch" href="/assets/js/28.a8d73d23.js"><link rel="prefetch" href="/assets/js/4.86835432.js"><link rel="prefetch" href="/assets/js/5.9c39abdc.js"><link rel="prefetch" href="/assets/js/6.f656095a.js"><link rel="prefetch" href="/assets/js/8.23a3db83.js"><link rel="prefetch" href="/assets/js/9.dd8eb4c6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7956da7d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="Gato Malo" class="logo"> <span class="site-name can-hide">Gato Malo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/tag/throne/" class="nav-link">Throne of Mithril</a></div><div class="nav-item"><a href="/about/me.html" class="nav-link">About</a></div><div class="nav-item"><a href="/about/me.html#subscribe-and-stay-posted" class="nav-link">Subscribe</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/tag/throne/" class="nav-link">Throne of Mithril</a></div><div class="nav-item"><a href="/about/me.html" class="nav-link">About</a></div><div class="nav-item"><a href="/about/me.html#subscribe-and-stay-posted" class="nav-link">Subscribe</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="page-title"><a href="#page-title" aria-hidden="true" class="header-anchor">#</a> Error Monitoring in Godot using Sentry</h1> <p><img src="/assets/img/sentry-glyph-dark.e6a87404.png" alt="Godot and Sentry"></p> <p>I'm a big fan of the Godot game engine, and lately, since players have been
testing the game more often, I've decided to add some monitoring solution to
get a better view of what's failing players as they try to play.</p> <p>In this post I'll show how to integrate Sentry's .Net SDK in Godot and use
it to receive usage reports and error monitoring.</p> <h2 id="what-s-sentry"><a href="#what-s-sentry" aria-hidden="true" class="header-anchor">#</a> What's Sentry?</h2> <p>Sentry is an open-source error monitoring tool I picked up on a while ago.</p> <p>I initially started using it because it was open-source and I was quite the
cheapskate, but, it really is an <strong>awesome</strong> and <strong>visually delightful</strong> tool.</p> <p>Aside from collecting error reports and alerting you when the application fails,
it makes it simple to integrate information and events <strong>you</strong> care about in
those reports. Also, it's fairly <strong>easy to integrate</strong> and get started
collecting data with, <strong>even if</strong> you're not that much of a friend to coding.</p> <p><img src="/assets/img/sentry_pic.55bdb220.jpg" alt="Sentry"></p> <p>So, if you want a dashboard filled with reports about <strong>how your game crashed</strong>,
to <strong>who</strong>, <strong>why</strong> and what were they doing leading to the crash,
<strong>keep reading.</strong></p> <h2 id="dependencies"><a href="#dependencies" aria-hidden="true" class="header-anchor">#</a> Dependencies</h2> <p>First, let's grab the required binaries. Installing the Sentry SDK collects a
few other assemblies so I added all of them to one <code>packages.config</code> for
convenience:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packages</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sentry<span class="token punctuation">&quot;</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>2.1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetFramework</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>net45<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sentry.Protocol<span class="token punctuation">&quot;</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>2.1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetFramework</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>net45<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sentry.PlatformAbstractions<span class="token punctuation">&quot;</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1.1.0.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetFramework</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>net45<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>System.Collections.Immutable<span class="token punctuation">&quot;</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1.5.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetFramework</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>net45<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packages</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Run <strong>NuGet</strong> to fetch all those into your project's <code>./packages/</code> folder.</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ mono nuget.exe restore
</code></pre></div><div class="tip custom-block"><p>If you don't have <strong>NuGet</strong> yet you can grab it <a href="https://www.nuget.org/downloads" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.<br>
The <strong>Windows x86 Commandline</strong> version is runnable using mono.</p></div> <p>Add references to the Sentry assemblies to your project:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemGroup</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Reference</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sentry, Version=2.1.0.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HintPath</span><span class="token punctuation">&gt;</span></span>$(ProjectDir)/packages/Sentry.2.1.0/lib/net461/Sentry.dll<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HintPath</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Private</span><span class="token punctuation">&gt;</span></span>True<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Private</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Reference</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Reference</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sentry.Protocol, Version=2.1.0.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HintPath</span><span class="token punctuation">&gt;</span></span>$(ProjectDir)/packages/Sentry.Protocol.2.1.0/lib/net46/Sentry.Protocol.dll<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HintPath</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Private</span><span class="token punctuation">&gt;</span></span>True<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Private</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Reference</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Reference</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sentry.PlatformAbstractions, Version=1.1.0.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HintPath</span><span class="token punctuation">&gt;</span></span>$(ProjectDir)/packages/Sentry.PlatformAbstractions.1.1.0/lib/net471/Sentry.PlatformAbstractions.dll<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HintPath</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Private</span><span class="token punctuation">&gt;</span></span>True<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Private</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Reference</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Reference</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>System.Collections.Immutable, Version=1.2.3.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HintPath</span><span class="token punctuation">&gt;</span></span>$(ProjectDir)/packages/System.Collections.Immutable.1.5.0/lib/portable-net45+win8+wp8+wpa81/System.Collections.Immutable.dll<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HintPath</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Private</span><span class="token punctuation">&gt;</span></span>True<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Private</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Reference</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemGroup</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="initialization"><a href="#initialization" aria-hidden="true" class="header-anchor">#</a> Initialization</h2> <p>Using Godot we don't really have an initialization section so I created a
dedicated node (here as <code>SentryController</code>) to hold the Sentry initialization
logic.</p> <p><img src="/assets/img/sentry_controller_node.90b0669d.png" alt="Sentry Controller Node"></p> <div class="warning custom-block"><p>Pay close attention to the node placement in the scene tree.</p> <p>The Sentry controller node must come before any application nodes.
Godot invokes their <code>_Ready()</code> methods according to their ordering on the tree,
and any exception thrown before SDK init will <strong>not be reported</strong>.</p></div> <p>After creating an account and a project Sentry will suggest an initialization
clause with your project's <strong>Dsn</strong>, similar to this:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token punctuation">(</span>SentrySdk<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token string">&quot;https://451cf9b0fd9e4f0294a0d15b6c36bce2@sentry.io/5170198&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// App code</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p>After creating a project <a href="https://docs.sentry.io/error-reporting/quickstart/?platform=csharp" target="_blank" rel="noopener noreferrer">this page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> will contain code examples with your project's Dsn in place.</p></div> <p>So after adding it to your node it should look somewhat like this.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SentryController</span> <span class="token punctuation">:</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">_Ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		SentrySdk<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span>o <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			o<span class="token punctuation">.</span>Dsn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dsn</span><span class="token punctuation">(</span><span class="token string">&quot;https://451cf9b0fd9e4f0294a0d15b6c36bce2@sentry.io/5170198&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="error-reporting"><a href="#error-reporting" aria-hidden="true" class="header-anchor">#</a> Error reporting</h2> <p>Now that the client is set up, any unhandled exceptions thrown will get
reported to the sentry API, and appear on your dashboard with a full trace.</p> <p>For example, lets set a button that throws an exception:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">:</span> <span class="token class-name">Node2D</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">_on_CrashButton_pressed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;Oh lord jesus it's a fire!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which after getting pressed will cause an error to appear on your issue
dashboard.</p> <p><img src="/assets/img/issue_dashboard_error.0e00a205.png" alt="Error Issue"></p> <h2 id="breadcrumbs"><a href="#breadcrumbs" aria-hidden="true" class="header-anchor">#</a> Breadcrumbs</h2> <p>A neat feature of Sentry that I had to cover.</p> <p>This allows you to log the user's behavior, potentially, leading to the error.
Giving you a better view into what exactly happened before the crash.</p> <p>The code is fairly simple, for example, lets log a button click <em>(exciting, I
know 😛)</em>.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">:</span> <span class="token class-name">Node2D</span> <span class="token punctuation">{</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">_on_AwesomeButton_pressed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        SentrySdk<span class="token punctuation">.</span><span class="token function">AddBreadcrumb</span><span class="token punctuation">(</span><span class="token string">&quot;Awesome button clicked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>After a few clicks on this button, and then, a hit to the ol' crashing button,
we'll get this neat report:</p> <p><img src="/assets/img/sentry_breadcrumbs.82ae6ef9.png" alt="Sentry breadcrumbs"></p> <h2 id="example-project"><a href="#example-project" aria-hidden="true" class="header-anchor">#</a> Example Project</h2> <p>I've prepared an example project demonstrating the Sentry integration here:</p> <p><a href="https://github.com/mastern2k3/godot-sentry-example" target="_blank" rel="noopener noreferrer">https://github.com/mastern2k3/godot-sentry-example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>There is a small caveat for people looking to export for Android, read ahead.</p> <h2 id="android"><a href="#android" aria-hidden="true" class="header-anchor">#</a> Android</h2> <p>Although making all this goodness to work on Android should've been an export
prest away, things turned out to be trickier.</p> <p>The Android prest kept failing the mono assembly preparation phase because of
an apparent missing assembly named <code>System.Web</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>ERROR: get_assembly_dependencies: Cannot load assembly (refonly): 'System.Web'.
   At: modules/mono/editor/godotsharp_export.cpp:93.
ERROR: get_assembly_dependencies: Cannot load one of the dependencies for the assembly: 'Sentry'.
   At: modules/mono/editor/godotsharp_export.cpp:98.
</code></pre></div><p>Finding the answer to this little bugger took me a good two days of research,
trial and error, so I'll cut to the chase.</p> <p>After digging through the <a href="https://github.com/getsentry/sentry-dotnet" target="_blank" rel="noopener noreferrer">.Net Sentry SDK<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> I found out that the <code>System.Web</code>
assembly (required by the <code>net461</code> variant of the <code>Sentry.dll</code> assembly) is not
a strict requirement, and that on other framework outputs its reference is
omitted.</p> <p>So, on the last trial, I ended up <a href="https://github.com/mastern2k3/sentry-dotnet" target="_blank" rel="noopener noreferrer">forking the SDK<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in an attempt to produce a
<code>Sentry.dll</code> that did not reference <code>System.Web</code>.</p> <p>You can download a compiled version of it <a href="https://github.com/mastern2k3/sentry-dotnet/releases/tag/2.1.0-godot" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Important: The example project references the compiled fork version so it
appears as such in the <code>.csproj</code> file:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Reference</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sentry, Version=2.1.0.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HintPath</span><span class="token punctuation">&gt;</span></span>$(ProjectDir)/../forks/sentry-dotnet/src/Sentry/bin/Release/net461/Sentry.dll<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HintPath</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- &lt;HintPath&gt;$(ProjectDir)/packages/Sentry.2.1.0/lib/net461/Sentry.dll&lt;/HintPath&gt; --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Private</span><span class="token punctuation">&gt;</span></span>True<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Private</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Reference</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>If you're not interested in any of this Android nonsense you can comment /
uncomment whichever line fits your needs.</p> <h2 id="other-sentry-related-stuff-you-should-check-out"><a href="#other-sentry-related-stuff-you-should-check-out" aria-hidden="true" class="header-anchor">#</a> Other Sentry related stuff you should check out</h2> <ul><li><p><a href="https://docs.sentry.io/enriching-error-data/scopes/?platform=csharp" target="_blank" rel="noopener noreferrer">Sentry Scopes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - these enable you to add more info (like user identification)
as application usage progresses.</p></li> <li><p><a href="https://docs.sentry.io/server/" target="_blank" rel="noopener noreferrer">Self hosting Sentry<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - yeah, you can do that.</p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Updated: </span> <span class="time">3/23/2020, 12:54:05 AM</span></div></footer> <!----> <div class="theme-default-content"><div class="commentbox"></div></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.74d693c4.js" defer></script><script src="/assets/js/16.39754019.js" defer></script><script src="/assets/js/1.b234d2c9.js" defer></script><script src="/assets/js/2.3538cb34.js" defer></script><script src="/assets/js/7.ed106160.js" defer></script>
  </body>
</html>
